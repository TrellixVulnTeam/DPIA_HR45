<!DOCTYPE html>
<html>
<head>
	<title>BUILDPIA</title>
	<script type="text/javascript" src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script type="text/javascript">
	var postdata;
	function takeValue(obj) {
	  	var count = obj.name;
	  	console.log(count);
	  	var text = document.getElementById(count).innerHTML;
    	postdata = {
    		takedValue : text,
    	};
	  	console.log(JSON.stringify(postdata));
    	document.getElementById("data").value = JSON.stringify(postdata);
	}
	// function takesValue() {
	// 	document.getElementById("data").value = JSON.stringify({takedValue : "test"});
	// 	// takenValue(JSON.stringify({takedValue : "test"}));
	// 	console.log(JSON.stringify({takedValue : "test"}));
	// 	document.getElementById("ch_form").submit();
 //     }
	// function takenValue(postdata) {
	//   console.log(postdata)
 //      $.ajax({
 //        type: 'post',
 //        url: '../choose_pia/',
 //        data: { 'postdata': JSON.stringify({takedValue : "test"}) },
 //        dataType: 'json'
 //      });
 //      console.log(postdata);
 //     }
	</script>
</head>
<body>
<form action="/team/choose_pia/" method="post" id="ch_form">
<table id="table">
	<tr>
		<th>專案名稱</th>
		<th>負責人</th>
		<th>專案簡述</th>
		<th></th>
	</tr>

	{% for userHasActivity in user_has_activity %}
	<tr>
		<td id={{ forloop.counter }} class="nr">{{ userHasActivity.activity.name }}</td>
		<td>{{ userHasActivity.activity.pia_manager_name }}</td>
		<td>{{ userHasActivity.activity.description }}</td>
		<td><input name={{ forloop.counter }} type="button" class="choose" onclick="takeValue(this)" value="選擇"></td>
	</tr>
	{% endfor %}
	<input type="text" id="data" name="data" hidden>
</table>
	<br><input type="submit" value="下一步">
</form>
<br></br>
<a href="/team/new_pia"><button>新增PIA</button></a>
<!-- <button><a href="/team/new_pia/">新增PIA</a></button> -->
</body>
</html>